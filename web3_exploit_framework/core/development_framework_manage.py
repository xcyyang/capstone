"""Manage supported development framework"""
import importlib

from web3_exploit_framework.core.development_framework_interface import (
    DevelopmentFramework,
)
from web3_exploit_framework.core.exceptions import (
    Development_Framework_Init_Error,
    Get_Development_Framework_Class,
)
from web3_exploit_framework.development_frameworks.hardhat import Hardhat


class DevFrameworkManager:
    def __init__(self) -> None:
        # Init supported framework list
        self.supported_framework_list = ["hardhat", "foundry"]

    def list_supported_framework(self):
        """List supported framework"""
        return self.supported_framework_list

    def get_development_framework_class(
        self, framework_name=""
    ) -> DevelopmentFramework:
        try:
            module = importlib.import_module(
                "web3_exploit_framework.development_frameworks"
                + "."
                + framework_name
            )
            development_framework_class = getattr(
                module, framework_name.capitalize()
            )
            return development_framework_class()
        except Exception as e:
            raise Get_Development_Framework_Class

    def initialize_framework(self, framework_name):
        try:
            development_framework = self.get_development_framework_class(
                framework_name
            )
            development_framework.init_environment()
        except Exception as e:
            raise Development_Framework_Init_Error

    def update_framework(self):
        pass
